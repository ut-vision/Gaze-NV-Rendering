Bootstrap: docker
From: nvidia/cuda:10.1-devel-ubuntu18.04
    
%runscript
%post
    # Downloads the latest package lists (important).
    # install dependencies and python packages
    DEBIAN_FRONTEND=noninteractive apt-get update 
    apt-get install -y python3 python3-pip
    apt-get install -y wget git curl vim
    apt-get install -y llvm-6.0 freeglut3 freeglut3-dev
    apt-get install -y libjpeg62-dev
    update-alternatives --install /usr/bin/python python /usr/bin/python3 10

    # Reduce the size of the image by deleting the package lists we downloaded,
    # which are useless now.
    rm -rf /var/lib/apt/lists/*
    # Install Python modules.
    python -m pip install --upgrade pip
    python -m pip install --no-cache-dir opencv-python
    python -m pip install torch==1.6.0 torchvision==0.7.0
    python -m pip install cmake cython
    python -m pip install dlib
    python -m pip install dataclasses matplotlib h5py
    python -m pip install pytorch3d==0.3.0
    python -m pip install imageio scipy glob2 scikit-image
